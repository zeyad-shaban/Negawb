{% extends 'categories/base.html' %}
{% block title %} Comments {% endblock title %}

{% block searchbar %}
<form class="form-inline" action="{% url 'comments:results_post' %}" method="GET">
    <input class="form-control mr-sm-2" type="search" name="q" placeholder="Search" aria-label="Search">
    <input class="btn btn-outline-success my-2 my-sm-0" type="submit" value="Search">
</form>
{% endblock searchbar %}

{% block content %}
<br>
<button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#addComment" aria-expanded="false"
    aria-controls="addComment">
    Create Post
</button>
<p>Comment{{ posts.count|pluralize }} Found: {{posts.count}}</p>
<br>
<div class="collapse" id="addComment">
    <form id="create-post" method="POST">
        {% csrf_token %}
        <div class="form-group">
            <label for="title">Title</label>
            <input type="text" name='title' class="form-control" id='title' placeholder="Optional" maxlength="40">
        </div>
        <div class="form-group">
            <label for="description">Description</label>
            <textarea name='description' class="form-control" id="description" required></textarea>
        </div>
        <div class="form-group">
            <label for="category">Category</label>
            {{form.category}}
        </div>
        <input class="btn btn-success" type="submit" value="Add Comment">
    </form>
    <br>
</div>
<!-- end add post -->
{% for post in posts %}
<div class="card">
    <div class="card-header">
        <a href="{% url 'people:people' post.user.id %}">
            {{ post.user}}
        </a>
        <small class="form-text text-muted">{{ post.post_date }}</small>
    </div>
    <div class="card-body">
        {% if post.title %}
        <h5 class="card-title">{{post.title}}</h5>
        {% endif %}
        <p class="card-text text-break">{{ post.description|truncatechars:300 }}</p>
        <a href="{% url 'comments:view_post' post.id %}" class="btn btn-primary">View Comment, Reply</a>
    </div>
</div>
{% endfor %}
{% endblock content %}